<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>ThothGunter</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">
</head>

<body>
  <section class="section">
    <div class="container">
      
<h1 class="title">
  My first post
</h1>
<p class="subtitle"><strong>2019-11-27</strong></p>
<p>This is my first blog post.</p>
<script type="module">

  import init, { render } from '../../paint.js';
  async function run() {

    let wasm = await init('../../paint_bg.wasm');
    const width = 600;
    const height = 600;

    const canvas = document.getElementById("canvas");
    canvas.width = width;
    canvas.height = height;

    const buffer_address = wasm.BUFFER.value;
    const image = new ImageData(
        new Uint8ClampedArray(
            wasm.memory.buffer,
            buffer_address,
            4 * width * height,
        ),
        width,
    );
    const ctx = canvas.getContext("2d");
    const render_loop = () => {
      render();

      ctx.putImageData(image, 0, 0);
      requestAnimationFrame(render_loop);
    };
    render_loop();


  }
  run();
</script>
<p><canvas id="canvas"></canvas></p>
<p>Can you see this?</p>


    </div>
  </section>
</body>

</html>
